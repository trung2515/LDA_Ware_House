<div class="wrapper">
  <div class="header">
    <div class="place-bar">
      <span>Báo cáo</span> / <span>Nhập xuất tồn sản phẩm</span>
    </div>
    <h2 class="heading">Nhập xuất tồn sản phẩm</h2>
  </div>
  <div class="filter-bar">
    <div class="start-end-date-wrap">
      <div class="field-value">
        <p>Từ ngày</p>
        <dx-date-box
          placeholder="12/1/2021"
          type="date"
          id="selected-date-time"
          [(value)]="startDate"
          (onValueChanged)="getStartDate($event)"
        >
        </dx-date-box>
      </div>
      <div class="field-value">
        <p>Đến ngày</p>
        <dx-date-box
          placeholder="12/1/2021"
          type="date"
          id="selected-date-time"
          [(value)]="endDate"
          (onValueChanged)="getEndDate($event)"
        >
        </dx-date-box>
      </div>
    </div>
    <div class="search-wrap">
      <div class="xlsx">
        <img src="assets/svg/xlsx.svg" alt="xlsx" />
      </div>
      <div class="form-group">
        <img src="assets/svg/search.svg" alt="search icon" />
        <input type="text" class="input-control" />
      </div>
    </div>
  </div>

  <!-- content -->
  <div class="content">
    <dx-tab-panel
      #tabPanel
      [dataSource]="tabCaptions"
      [selectedIndex]="0"
      [loop]="false"
      [animationEnabled]="true"
      [swipeEnabled]="false"
    >
      <div
        *dxTemplate="let tabTitle of 'title'"
        [ngClass]="'tab-title ' + 'tab-title-' + tabTitle.id"
      >
        <p>{{ tabTitle.tabName }}</p>
      </div>
      <div *dxTemplate="let tabPanel of 'item'">
        <div class="tabpanel-item">
          <dx-tree-list
            id="production_table"
            [dataSource]="tabPanel.data"
            keyExpr="shiftID"
            [showRowLines]="true"
            [showBorders]="true"
            [columnAutoWidth]="true"
            *ngIf="tabPanel.id === 1"
          >
            <dxo-header-filter
              [allowSearch]="true"
              [visible]="true"
            ></dxo-header-filter>
            <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
            <dxi-column
              dataField="shiftID"
              [fixed]="true"
              caption="Ca"
              alignment="left"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="date"
              [fixed]="true"
              caption="Ngày"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="name"
              [fixed]="true"
              caption="Sản phẩm"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="type_product"
              [fixed]="true"
              caption="Loại sản phẩm"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="type_bag"
              [fixed]="true"
              caption="Loại bao"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="bag_unit"
              caption="Đơn vị đóng bao"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="ballot_type"
              caption="Loại phiếu"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="consumer"
              caption="Kho"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="consumer_detail"
              caption="Chi tiết KHND"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="trips_number"
              caption="Số chuyến"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="consignments_number"
              caption="Số lô"
              alignment="left"
              headerCellTemplate="titleHeaderTemplate"
            ></dxi-column>
            <dxi-column
              dataField="bag_number"
              headerCellTemplate="titleHeaderTemplate"
              alignment="left"
              caption="Số bao"
            ></dxi-column>
            <dxi-column
              dataField="ton_number"
              headerCellTemplate="titleHeaderTemplate"
              caption="Số tấn"
              alignment="left"
            ></dxi-column>
            <dxi-column
              dataField="warehouse"
              headerCellTemplate="titleHeaderTemplate"
              caption="Kho"
            ></dxi-column>
            <dxi-column
              dataField="reason"
              headerCellTemplate="titleHeaderTemplate"
              caption="Nguyên nhân"
            ></dxi-column>
            <dxi-column
              dataField="user"
              headerCellTemplate="titleHeaderTemplate"
              caption="User"
            ></dxi-column>
            <dxi-column
              dataField="note"
              headerCellTemplate="titleHeaderTemplate"
              caption="Ghi chú"
            ></dxi-column>

            <!-- title header template -->
            <div
              class="caption-cus"
              *dxTemplate="let info of 'titleHeaderTemplate'"
            >
              <p style="font-size:16px; color: #3459E6; font-weight: 500;">
                {{ info.column.caption }}
              </p>
            </div>
          </dx-tree-list>
          <div *ngIf="tabPanel.id === 2" id="pivotgrid-demo">
            <dx-pivot-grid
              id="pivotgrid"
              [allowSortingBySummary]="true"
              [allowSorting]="true"
              [showBorders]="true"
              [showColumnGrandTotals]="true"
              [showRowGrandTotals]="true"
              [showRowTotals]="false"
              [showColumnTotals]="true"
              [allowFiltering]="true"
              [dataSource]="detailInputOutputReport"
            >
              <dxo-field-chooser [enabled]="false"></dxo-field-chooser>
              <dxo-header-filter
                [allowSearch]="true"
                [showRelevantValues]="true"
                [width]="300"
                [height]="400"
              ></dxo-header-filter>
              <dxo-field-panel [visible]="true"> </dxo-field-panel>
            </dx-pivot-grid>
          </div>

          <div *ngIf="tabPanel.id === 3" id="pivotgrid-demo1">
            <dx-pivot-grid
              id="pivotgrid"
              [allowSortingBySummary]="true"
              [allowSorting]="true"
              [showBorders]="true"
              [showColumnGrandTotals]="true"
              [showRowGrandTotals]="true"

              [showRowTotals]="false"
              [showColumnTotals]="true"
              [allowFiltering]="true"
              [allowExpandAll]="true"
              [dataSource]="detailImExInventoryReport"
            >
              <dxo-field-chooser [enabled]="false"></dxo-field-chooser>
              <dxo-header-filter
                [allowSearch]="true"
                [showRelevantValues]="true"
                [width]="300"
                [height]="400"
              ></dxo-header-filter>
              <dxo-field-panel [visible]="true"> </dxo-field-panel>
            </dx-pivot-grid>
          </div>
        </div>
      </div>
    </dx-tab-panel>
  </div>
</div>
